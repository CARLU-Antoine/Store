<app-navbar></app-navbar>

<div class="container-creer-connexion">
<p-tabMenu 
  [model]="items" 
  [(activeItem)]="activeItem" 
  (activeItemChange)="onTabChange($event)"
  styleClass="custom-tab-menu">
</p-tabMenu>

<!-- Onglet Connexion -->
<div *ngIf="activeIndex === 0">
  <div class="login-container">
    <p-card>
      <h2>Connexion</h2>
      <form [formGroup]="loginForm" (ngSubmit)="connexion()">
        <div class="p-fluid">
          <div class="field">
            <label for="email">Email</label>
            <input pInputText id="email" formControlName="email" />
            <small *ngIf="submitted && f['email'].errors" class="p-error">
              {{ f['email'].errors['required'] ? 'Email requis.' : 
                 (f['email'].errors['email'] ? 'Email invalide.' : '') }}
            </small>
          </div>

          <div class="field">
            <label for="password">Mot de passe</label>
            <input pInputText id="password" type="password" formControlName="password" />
            <small *ngIf="submitted && f['password'].errors" class="p-error">
              {{ f['password'].errors['required'] ? 'Mot de passe requis.' : '' }}
            </small>
          </div>

          <div class="field-checkbox">
            <p-checkbox binary="true" formControlName="remember" inputId="remember"></p-checkbox>
            <label for="remember">Se souvenir de moi</label>
          </div>

          <p-button type="submit" label="Connexion" [loading]="loading" class="mt-2"></p-button>
        </div>
      </form>
    </p-card>
  </div>
</div>

<!-- Onglet Créer un compte -->
<div *ngIf="activeIndex === 1">
  <div class="login-container">
    <p-card>
      <h2>Créer un compte</h2>
      <form [formGroup]="registerForm" (ngSubmit)="creer()">
        <div class="p-fluid">
          <div class="field">
            <label for="reg-email">Email</label>
            <input pInputText id="reg-email" formControlName="email" />
            <small *ngIf="submitted && rf['email'].errors" class="p-error">
              {{ rf['email'].errors['required'] ? 'Email requis.' : 
                 (rf['email'].errors['email'] ? 'Email invalide.' : '') }}
            </small>
          </div>

          <div class="field">
            <label for="reg-password">Mot de passe</label>
            <input pInputText id="reg-password" type="password" formControlName="password" />
            <small *ngIf="submitted && rf['password'].errors" class="p-error">
              {{ rf['password'].errors['required'] ? 'Mot de passe requis.' : '' }}
            </small>
          </div>

          <div class="field">
            <label for="confirmPassword">Confirmer le mot de passe</label>
            <input pInputText id="confirmPassword" type="password" formControlName="confirmPassword" />
            <small *ngIf="submitted && rf['confirmPassword'].errors" class="p-error">
              {{ rf['confirmPassword'].errors['required'] ? 'Confirmation requise.' : '' }}
            </small>
          </div>

          <p-button type="submit" label="Créer un compte" [loading]="loading" class="mt-2"></p-button>
        </div>
      </form>
    </p-card>
  </div>
</div>

</div>
